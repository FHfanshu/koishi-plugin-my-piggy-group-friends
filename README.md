# koishi-plugin-my-pig-group-friends

[![npm](https://img.shields.io/npm/v/koishi-plugin-my-pig-group-friends?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-my-pig-group-friends)

**çŒªé†’** - è™šæ‹Ÿæ—…è¡Œæ‰“å¡æ’ä»¶ï¼Œè®©ä½ çš„çŒªçŒªç¾¤å‹ç¯æ¸¸ä¸–ç•Œã€‚

> ä½ ç¾¤é‡Œæœ‰æ²¡æœ‰é‚£ç§ä½œæ¯æ··ä¹±ã€æ—¥å¤œé¢ å€’çš„çŒªçŒªæœ‹å‹ï¼Ÿç°åœ¨ï¼Œæ¯å½“ä»–ä»¬åœ¨å¥‡æ€ªçš„æ—¶é—´å†’æ³¡ï¼Œå°±é€ä»–ä»¬å»ä¸–ç•Œå„åœ°"æ—…è¡Œ"å§ï¼

## åŠŸèƒ½äº®ç‚¹

- **è™šæ‹Ÿæ—…è¡Œæ‰“å¡** - ç”Ÿæˆç²¾ç¾æ¯›ç»ç’ƒæ•ˆæœè¶³è¿¹å¡ç‰‡ï¼Œè®°å½•çŒªçŒªçš„ç¯çƒä¹‹æ—…
- **æ™ºèƒ½æ—¥å‡ºé€‰ç‚¹** - LLM ä¼šæ ¹æ®å½“å‰æ—¶é—´ï¼Œé€‰æ‹©æ­£åœ¨è¿æ¥æ—¥å‡ºçš„åœ°åŒºä½œä¸ºç›®çš„åœ°ï¼ˆæ¯•ç«Ÿæ˜¯"çŒªé†’"å˜›ï¼‰
- **é«˜è´¨é‡é£æ™¯å›¾** - é›†æˆ Unsplash / Pexels APIï¼Œè·å–ç›®çš„åœ°çœŸå®é£æ™¯ç…§ç‰‡
- **AI ç”Ÿå›¾æ”¯æŒ** - å¯é€‰ç”Ÿæˆå°çŒªåœ¨å½“åœ°æ—…è¡Œçš„ AI æ’ç”»
- **ä½œæ¯å¼‚å¸¸æ£€æµ‹ï¼ˆå®éªŒæ€§ï¼‰** - è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ¯æ—¥é¦–æ¡æ¶ˆæ¯æ—¶é—´ï¼Œåˆ¤æ–­ä½œæ¯æ˜¯å¦å¼‚å¸¸
- **ä¸–ç•Œè¶³è¿¹åœ°å›¾** - ç”Ÿæˆç”¨æˆ·å…¨çƒå›½å®¶è¶³è¿¹åœ°å›¾ä¸Topç›®çš„åœ°ç»Ÿè®¡

## æ•ˆæœé¢„è§ˆ

å½“è§¦å‘æ—…è¡Œæ—¶ï¼Œä¼šç”Ÿæˆç±»ä¼¼è¿™æ ·çš„å¡ç‰‡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ç›®çš„åœ°é£æ™¯ç…§ç‰‡èƒŒæ™¯]        â”‚
â”‚                             â”‚
â”‚  ğŸ· xxx çŒªé†’ï¼              â”‚
â”‚                             â”‚
â”‚  å»äº† å†°å²›è“æ¹–æ¸©æ³‰ï¼Œå†°å²›ï¼   â”‚
â”‚                             â”‚
â”‚  2024-01-15 06:32           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®‰è£…

```bash
npm install koishi-plugin-my-pig-group-friends
```

## ä¾èµ–

### å¿…éœ€
- `database` - å­˜å‚¨ç”¨æˆ·çŠ¶æ€å’Œæ—…è¡Œæ—¥å¿—
- `cron` - å®šæ—¶æ¸…ç†ä»»åŠ¡
- `puppeteer` - æ¸²æŸ“ç²¾ç¾å¡ç‰‡

### å¯é€‰
- `chatluna` - LLM åŠ¨æ€ç”Ÿæˆæ—…è¡Œåœ°ç‚¹ï¼ˆæ¨èï¼‰
- `chatluna_storage` - é«˜æ•ˆç®¡ç†å›¾ç‰‡ç¼“å­˜
- `media-luna` - AI ç»˜å›¾åŠŸèƒ½

## ä½¿ç”¨æ–¹æ³•

### æŒ‡ä»¤

| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `pig` | é€è‡ªå·±å»æ—…è¡Œ |
| `pig @æŸäºº` | é€æŒ‡å®šç”¨æˆ·å»æ—…è¡Œ |
| `çŒªé†’` | `pig` çš„åˆ«å |
| `pig.map` | æŸ¥çœ‹è‡ªå·±çš„ä¸–ç•Œè¶³è¿¹åœ°å›¾ |
| `pig.map @æŸäºº` | æŸ¥çœ‹æŒ‡å®šç”¨æˆ·ä¸–ç•Œè¶³è¿¹åœ°å›¾ |
| `ä¸–ç•Œè¶³è¿¹` | `pig.map` çš„åˆ«å |

### ç¤ºä¾‹

```
> çŒªé†’ @å¼ ä¸‰
ğŸ· å¼ ä¸‰ çŒªé†’ï¼å»äº† æŒªå¨ç½—å¼—æ•¦ç¾¤å²›ï¼ŒæŒªå¨ï¼
[ç²¾ç¾å¡ç‰‡å›¾ç‰‡]
```

## é…ç½®è¯´æ˜

### åŸºç¡€è®¾ç½®

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `outputMode` | `image` | è¾“å‡ºæ¨¡å¼ï¼š`image` ç”Ÿæˆå¡ç‰‡ï¼Œ`text` çº¯æ–‡æœ¬ |
| `travelMessageTemplate` | `å»äº† {landmark}ï¼Œ{country}ï¼` | æ—…è¡Œæ¶ˆæ¯æ¨¡æ¿ |

### åœ°ç‚¹ä¸å›¾ç‰‡

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `llmLocationEnabled` | `false` | å¯ç”¨ LLM åŠ¨æ€ç”Ÿæˆåœ°ç‚¹ |
| `llmLocationModel` | - | LLM æ¨¡å‹ï¼ˆæ¨è gemini-flash ç­‰å¿«é€Ÿæ¨¡å‹ï¼‰ |
| `llmLocationCustomContext` | - | è‡ªå®šä¹‰åå¥½ï¼ˆå¦‚ï¼šåŒ—æ¬§é£æ ¼ã€èµ›åšæœ‹å…‹å»ºç­‘ç­‰ï¼‰ |
| `llmFailureCooldownMs` | `300000` | LLM è°ƒç”¨å¤±è´¥åçš„å†·å´æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `imageSearchPrompt` | `{landmark} {country} landscape` | å›¾ç‰‡æœç´¢å…³é”®è¯æ¨¡æ¿ |
| `unsplashAccessKey` | - | Unsplash API å¯†é’¥ |
| `pexelsApiKey` | - | Pexels API å¯†é’¥ï¼ˆå¤‡ç”¨å›¾æºï¼‰ |
| `backgroundInlineMaxBytes` | `8388608` | èƒŒæ™¯å›¾å†…è”ä¸º data URL çš„æœ€å¤§å­—èŠ‚æ•° |

### AI ç”Ÿå›¾ï¼ˆå¯é€‰ï¼‰

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `aigcEnabled` | `false` | å¯ç”¨ AI ç»˜å›¾ |
| `aigcChannel` | - | media-luna ç»˜å›¾æ¸ é“ |
| `aigcPrompt` | `ä¸€ä¸ªå¯çˆ±çš„å¡é€šå°çŒªæ­£åœ¨...` | ç»˜å›¾æç¤ºè¯æ¨¡æ¿ |

### è‡ªåŠ¨æ£€æµ‹ï¼ˆå®éªŒæ€§ï¼‰

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `experimentalAutoDetect` | `false` | è‡ªåŠ¨æ£€æµ‹ä½œæ¯å¼‚å¸¸ |
| `experimentalAutoDetectScope` | `guild` | è§¦å‘èŒƒå›´ï¼šä»…ç¾¤èŠï¼ˆ`guild`ï¼‰æˆ–ç¾¤èŠ+ç§èŠï¼ˆ`all`ï¼‰ |
| `abnormalThreshold` | `3` | å¼‚å¸¸åˆ¤å®šé˜ˆå€¼ï¼ˆå°æ—¶ï¼‰ |

### å­˜å‚¨è®¾ç½®

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `useStorageService` | `true` | ä½¿ç”¨å­˜å‚¨æœåŠ¡ç¼“å­˜å›¾ç‰‡ |
| `storageCacheHours` | `24` | å›¾ç‰‡ç¼“å­˜æ—¶é—´ï¼ˆå°æ—¶ï¼‰ |
| `logRetentionDays` | `45` | æ—…è¡Œè®°å½•ä¿ç•™å¤©æ•° |

## è·å– API å¯†é’¥

### Unsplashï¼ˆæ¨èï¼‰
1. è®¿é—® [Unsplash Developers](https://unsplash.com/developers)
2. åˆ›å»ºåº”ç”¨ï¼Œè·å– Access Key
3. å…è´¹é¢åº¦ï¼š50 æ¬¡/å°æ—¶

### Pexelsï¼ˆå¤‡ç”¨ï¼‰
1. è®¿é—® [Pexels API](https://www.pexels.com/api/)
2. æ³¨å†Œå¹¶è·å– API Key
3. å…è´¹é¢åº¦ï¼š200 æ¬¡/å°æ—¶

## License

MIT
